(function(e){function t(t){for(var n,i,r=t[0],o=t[1],p=t[2],d=0,u=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&u.push(s[i][0]),s[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);c&&c(t);while(u.length)u.shift()();return l.push.apply(l,p||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,r=1;r<a.length;r++){var o=a[r];0!==s[o]&&(n=!1)}n&&(l.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},s={app:0},l=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/prtcv/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var p=0;p<r.length;p++)t(r[p]);var c=o;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"32fc":function(e,t,a){e.exports=a.p+"img/cats.05eaeb41.png"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"background",attrs:{id:"app"}},[a("el-col",{attrs:{lg:{offset:4,span:16},sm:{offset:1,span:22},xs:{offset:0,span:24}}},[a("el-container",[a("el-header",[a("b",[e._v("SIUP")])]),a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"Loading OpenCV..."}},[a("CVApp",{attrs:{loading:e.loading},on:{"update:loading":function(t){e.loading=t}}})],1)],1)],1)],1)},l=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-col",{attrs:{span:2}},[n("el-switch",{attrs:{"active-value":12,"inactive-value":0},model:{value:e.srcImageCol,callback:function(t){e.srcImageCol=t},expression:"srcImageCol"}})],1),n("el-col",{attrs:{span:20}},[n("div",{staticClass:"image"},[n("el-popover",{attrs:{placement:"bottom",title:"Load image",width:"300",trigger:"hover"}},[n("input",{attrs:{type:"file",id:"file",name:"files",accept:"image/*"},on:{change:e.selectIMG}}),n("el-tag",{staticClass:"button",attrs:{slot:"reference",effect:"dark",type:"success",size:"mini"},slot:"reference"},[n("i",{staticClass:"el-icon-upload2"})])],1),n("el-tag",{attrs:{effect:"dark",size:"mini"}},[e._v("SRC "),n("i",{staticClass:"el-icon-caret-right"})]),e._l(e.panels,(function(t){return n("el-tag",{key:t.id,attrs:{size:"mini"}},[e._v(e._s(t.type)+" "),n("i",{staticClass:"el-icon-caret-right"})])})),n("el-tag",{attrs:{effect:"dark",size:"mini"}},[e._v("OUT")]),n("a",{attrs:{download:"output.png",href:e.saveIMGurl()}},[n("el-tag",{staticClass:"button",attrs:{effect:"dark",type:"success",size:"mini"}},[n("i",{staticClass:"el-icon-download"})])],1)],2)]),n("el-col",{attrs:{span:2}})],1),n("el-container",[n("el-col",{attrs:{hidden:!Boolean(e.srcImageCol),span:e.srcImageCol}},[n("img",{ref:"img",attrs:{src:a("32fc")}})]),n("el-col",{attrs:{span:24-e.srcImageCol}},[n("canvas",{ref:"dstimg",staticClass:"imgcanvas",attrs:{id:"dstimg"}})])],1),n("el-divider",{attrs:{"content-position":"left"}},[e._v("Edit OpenCV components")]),n("CVPanelsEdit",{model:{value:e.panels,callback:function(t){e.panels=t},expression:"panels"}})],1)},r=[],o=(a("d3b7"),a("3ca3"),a("18a5"),a("ddb0"),a("2b3d"),a("b85c")),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-col",{attrs:{span:12}},[e._l(e.panels,(function(t,n){return a("p",{key:n},[a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.remove(n)}}}),a("el-button",{attrs:{type:"info",size:"mini",disabled:n==e.panels.length-1,icon:"el-icon-arrow-down"},on:{click:function(t){return e.down(n)}}}),a("el-button",{attrs:{type:"info",size:"mini",disabled:0==n,icon:"el-icon-arrow-up"},on:{click:function(t){return e.up(n)}}}),e.panelVisibleIdx===n?[a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(t){e.panelVisibleIdx=null}}},[e._v(e._s(t.type))])]:[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.panelVisibleIdx=n}}},[e._v(e._s(t.type))])]],2)],1)})),a("p",[a("CVPanelAddDialog",{model:{value:e.panels,callback:function(t){e.panels=t},expression:"panels"}})],1)],2),a("el-col",{class:{bcg:e.editActive},attrs:{span:12}},e._l(e.panels,(function(t,n){return a("p",{key:n},[e.panelVisibleIdx===n?["THRESH"===t.type?a("CVEditThresh",{model:{value:t.params,callback:function(a){e.$set(t,"params",a)},expression:"panel.params"}}):"BLUR"===t.type?a("CVEditBlur",{model:{value:t.params,callback:function(a){e.$set(t,"params",a)},expression:"panel.params"}}):"COLOR"===t.type?a("CVEditColor",{model:{value:t.params,callback:function(a){e.$set(t,"params",a)},expression:"panel.params"}}):e._e()]:e._e()],2)})),0)],1)},c=[],d=(a("a434"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("Type:")]),a("el-select",{model:{value:e.params.borderType,callback:function(t){e.$set(e.params,"borderType",t)},expression:"params.borderType"}},e._l(e.typeValues,(function(e){return a("el-option",{key:e.text,attrs:{value:e.value,label:e.text}})})),1),a("p",[e._v("Kernel size:")]),a("p",[a("el-input-number",{attrs:{min:1,max:10},model:{value:e.params.ksize[0],callback:function(t){e.$set(e.params.ksize,0,t)},expression:"params.ksize[0]"}}),a("el-input-number",{attrs:{min:1,max:10},model:{value:e.params.ksize[1],callback:function(t){e.$set(e.params.ksize,1,t)},expression:"params.ksize[1]"}})],1),a("p",[e._v("Anchor:")]),a("p",[a("el-input-number",{attrs:{min:-1,max:10},model:{value:e.params.anchor[0],callback:function(t){e.$set(e.params.anchor,0,t)},expression:"params.anchor[0]"}}),a("el-input-number",{attrs:{min:-1,max:10},model:{value:e.params.anchor[1],callback:function(t){e.$set(e.params.anchor,1,t)},expression:"params.anchor[1]"}})],1)],1)}),u=[],m={name:"CVBlur",model:{prop:"params",event:"change",size:"mini"},props:{params:Object},data:function(){return{typeValues:[{text:"Default",value:window.cv.BORDER_DEFAULT}]}}},f=m,v=(a("d0bb"),a("2877")),h=Object(v["a"])(f,d,u,!1,null,"08777a2d",null),b=h.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("Type:")]),a("el-select",{attrs:{"default-first-option":!0},model:{value:e.params.type,callback:function(t){e.$set(e.params,"type",t)},expression:"params.type"}},e._l(e.typeValues,(function(e){return a("el-option",{key:e.text,attrs:{value:e.value,label:e.text}})})),1)],1)},g=[],x={name:"CVColor",model:{prop:"params",event:"change"},props:{params:Object},data:function(){return{typeValues:[{text:"BRG > GRAY",value:window.cv.COLOR_RGBA2GRAY},{text:"GRAY > BRG",value:window.cv.COLOR_GRAY2RGBA}]}}},C=x,_=Object(v["a"])(C,y,g,!1,null,"510a4fd4",null),V=_.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("Threshold:")]),a("el-slider",{attrs:{"show-input":"",min:0,max:255},model:{value:e.params.thresh,callback:function(t){e.$set(e.params,"thresh",e._n(t))},expression:"params.thresh"}}),a("p",[e._v("Max Value:")]),a("el-slider",{attrs:{"show-input":"",min:0,max:255},model:{value:e.params.maxval,callback:function(t){e.$set(e.params,"maxval",e._n(t))},expression:"params.maxval"}}),a("p",[e._v("Type:")]),a("el-select",{model:{value:e.params.type,callback:function(t){e.$set(e.params,"type",t)},expression:"params.type"}},e._l(e.typeValues,(function(e){return a("el-option",{key:e.text,attrs:{value:e.value,label:e.text}})})),1),!0===e.visible?a("p",[a("el-button",{on:{click:function(t){return e.$emit("update:visible",!1)}}},[e._v("Cancel")])],1):e._e()],1)},A=[],T={name:"CVThresh",model:{prop:"params",event:"change"},props:{params:Object,visible:{type:Boolean,default:!1,required:!1}},data:function(){return{typeValues:[{text:"Binary",value:window.cv.THRESH_BINARY},{text:"Binary Inv",value:window.cv.THRESH_BINARY_INV}]}}},O=T,w=Object(v["a"])(O,k,A,!1,null,"c3c548b0",null),R=w.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"success"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("Add")]),a("el-dialog",{attrs:{title:"Add panel",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-select",{attrs:{"default-first-option":!0},model:{value:e.panelAddedType,callback:function(t){e.panelAddedType=t},expression:"panelAddedType"}},e._l(e.panelTypes,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1),"COLOR"===e.panelAddedType?a("CVEditColor",{model:{value:e.panelAddedParams,callback:function(t){e.panelAddedParams=t},expression:"panelAddedParams"}}):"BLUR"===e.panelAddedType?a("CVEditBlur",{model:{value:e.panelAddedParams,callback:function(t){e.panelAddedParams=t},expression:"panelAddedParams"}}):"THRESH"===e.panelAddedType?a("CVEditThresh",{model:{value:e.panelAddedParams,callback:function(t){e.panelAddedParams=t},expression:"panelAddedParams"}}):e._e(),a("p",[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),a("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("Add")])],1)],1)],1)},I=[],P=(a("dca8"),Object.freeze({panelTemplates:[{type:"COLOR",params:{type:11},visible:!1},{type:"THRESH",params:{thresh:100,maxval:255,type:0,describe:""},visible:!1},{type:"BLUR",params:{ksize:[3,3],anchor:[-1,-1],borderType:4},visible:!1}]})),j={name:"CVPanelAddDialog",components:{CVEditBlur:b,CVEditColor:V,CVEditThresh:R},model:{prop:"panels",event:"change"},props:{panels:Array},data:function(){return{dialogVisible:!1,panelTemplates:P.panelTemplates,panelTypes:[],panelAddedType:"",panelAddedParams:{},panelAddedAccept:!1}},methods:{add:function(){var e={};Object.assign(e,{type:this.panelAddedType,params:this.panelAddedParams,visible:!1}),this.panels.push(e),this.dialogVisible=!1,this.panelAddedParams={},this.panelAddedType=""}},watch:{panelAddedType:function(e,t){if(t!=e){this.panelAddedParams={};var a,n=Object(o["a"])(P.panelTemplates);try{for(n.s();!(a=n.n()).done;){var s=a.value;s.type===this.panelAddedType&&(this.panelAddedParams=JSON.parse(JSON.stringify(s.params)))}}catch(l){n.e(l)}finally{n.f()}}}},mounted:function(){var e,t=Object(o["a"])(P.panelTemplates);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.panelTypes.push(a.type)}}catch(n){t.e(n)}finally{t.f()}}},$=j,z=(a("c0b2"),Object(v["a"])($,E,I,!1,null,"c2b72924",null)),S=z.exports,B={name:"CVPanelEdit",components:{CVEditBlur:b,CVEditColor:V,CVEditThresh:R,CVPanelAddDialog:S},model:{prop:"panels",event:"change"},data:function(){return{panelVisibleIdx:null}},computed:{editActive:function(){return null!==this.panelVisibleIdx&&!(this.panelVisibleIdx>this.panels.length-1)}},props:{panels:Array},methods:{up:function(e){if(0!==e){var t=[this.panels[e],this.panels[e-1]];this.panels.splice(e-1,2,t[0],t[1])}},down:function(e){if(e!==this.panels.length-1){var t=[this.panels[e],this.panels[e+1]];this.panels.splice(e,2,t[1],t[0])}},remove:function(e){this.panels.splice(e,1)}}},G=B,L=(a("97a8"),Object(v["a"])(G,p,c,!1,null,"2f0eeeb2",null)),M=L.exports,H={name:"CVApp",components:{CVPanelsEdit:M},props:{},data:function(){return{panelTemplates:P.panelTemplates,panels:[],timerSet:!1,timerValueChanged:!1,timerValue:500,srcImageCol:12}},watch:{srcImageCol:{handler:function(e,t){e>t||this.processIMGschedule()}},panels:{handler:function(){this.processIMGschedule()},deep:!0}},methods:{selectIMG:function(e){var t=e.target.files;t.length&&(this.imgurl=URL.createObjectURL(t[0]),"undefined"!==typeof this.imgurl&&(this.$refs.img.onload=this.processIMG,this.$refs.img.src=this.imgurl))},saveIMGurl:function(){if("undefined"===typeof this.$refs.dstimg)return"#";var e=this.$refs.dstimg.toDataURL("image/png");return e},processIMGschedule:function(){this.timerSet?this.timerValueChanged=!0:(this.timerSet=!0,setTimeout(this.timerStopFun,this.timerValue))},timerStopFun:function(){this.timerValueChanged?(this.timerValueChanged=!1,setTimeout(this.timerStopFun,this.timerValue)):(this.timerSet=!1,this.processIMG())},processIMG:function(){var e,t=window.cv,a=t.imread(this.$refs.img),n=Object(o["a"])(this.panels);try{for(n.s();!(e=n.n()).done;){var s=e.value,l=s.params;if("THRESH"===s.type)t.threshold(a,a,l.thresh,l.maxval,l.type);else if("COLOR"===s.type)t.cvtColor(a,a,l.type);else if("BLUR"===s.type){var i=new t.Size(l.ksize[0],l.ksize[1]),r=new t.Point(l.anchor[0],l.anchor[1]);t.blur(a,a,i,r,l.borderType)}}}catch(p){n.e(p)}finally{n.f()}t.imshow(this.$refs.dstimg,a)},onloadOpenCV:function(){var e=this;window.cv["onRuntimeInitialized"]=function(){var t={};Object.assign(t,P.panelTemplates[0]),e.panels.push(t),e.$emit("update:loading",!1)}}},mounted:function(){var e=document.createElement("script");e.type="text/javascript",e.async="async",e.src="opencv.js",e.onload=this.onloadOpenCV,document.body.appendChild(e)}},U=H,D=(a("d025"),Object(v["a"])(U,i,r,!1,null,"6127c8c8",null)),N=D.exports,Y={name:"app",components:{CVApp:N},data:function(){return{loading:!0}}},F=Y,J=(a("ee3c"),Object(v["a"])(F,s,l,!1,null,"4b433884",null)),q=J.exports,K=a("5c96"),Q=a.n(K),W=(a("0fae"),a("e05f"),a("b2d6")),X=a.n(W);n["default"].use(Q.a,{size:"small",locale:X.a});a("8aa1"),a("7d05");n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(q)}}).$mount("#app")},"76f4":function(e,t,a){},"7d05":function(e,t,a){},"8aa1":function(e,t,a){},"96bb":function(e,t,a){},"97a8":function(e,t,a){"use strict";var n=a("76f4"),s=a.n(n);s.a},ac27:function(e,t,a){},c0b2:function(e,t,a){"use strict";var n=a("e04f"),s=a.n(n);s.a},d025:function(e,t,a){"use strict";var n=a("ac27"),s=a.n(n);s.a},d0bb:function(e,t,a){"use strict";var n=a("96bb"),s=a.n(n);s.a},e04f:function(e,t,a){},ee3c:function(e,t,a){"use strict";var n=a("f34a"),s=a.n(n);s.a},f34a:function(e,t,a){}});
//# sourceMappingURL=app.82b2ef2f.js.map